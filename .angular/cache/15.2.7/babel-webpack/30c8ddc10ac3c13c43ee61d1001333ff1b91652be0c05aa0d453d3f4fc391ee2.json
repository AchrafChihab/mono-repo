{"ast":null,"code":"import { StorageService } from './../../services/storage.service';\nimport { FormGroup, UntypedFormControl, Validators } from '@angular/forms';\nimport { AuthService } from './../../services/auth.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./../../services/auth.service\";\nimport * as i2 from \"./../../services/storage.service\";\nfunction SigninComponent_p_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r0.messageError);\n  }\n}\nexport class SigninComponent {\n  constructor(AuthService, StorageService) {\n    this.AuthService = AuthService;\n    this.StorageService = StorageService;\n    this.authError = false;\n    this.messageError = \"Error is from the server , please try again\";\n    this.loginForm = new FormGroup({\n      email: new UntypedFormControl('', Validators.required),\n      password: new UntypedFormControl('', Validators.required)\n    });\n  }\n  singIN(email, password) {\n    this.AuthService.login(email, password).subscribe({\n      next: res => {\n        console.log(res), this.authError = false, this.loginForm.reset();\n        this.StorageService.setToken(res.token);\n      },\n      error: err => {\n        this.authError = true;\n        if (err.status == 400) {\n          this.messageError = err.error.message;\n        }\n      }\n    });\n  }\n  submit() {\n    // console.log(this.loginForm);\n    if (this.loginForm.invalid) {\n      return;\n    }\n    this.singIN(this.form.email.value, this.form.password.value);\n  }\n  get form() {\n    return this.loginForm.controls;\n  }\n}\nSigninComponent.ɵfac = function SigninComponent_Factory(t) {\n  return new (t || SigninComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.StorageService));\n};\nSigninComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: SigninComponent,\n  selectors: [[\"users-signin\"]],\n  decls: 17,\n  vars: 2,\n  consts: [[1, \"row\", \"my-5\"], [1, \"col-md-4\", \"my-3\", \"mx-auto\"], [1, \"text-center\", \"my-3\"], [3, \"formGroup\", \"ngSubmit\"], [1, \"form-group\", \"my-3\"], [\"for\", \"email\"], [\"formControlName\", \"email\", \"type\", \"text\", \"placeholder\", \"your E-mail\", \"id\", \"email\", 1, \"form-control\"], [1, \"form-group\"], [\"for\", \"password\"], [\"formControlName\", \"password\", \"type\", \"password\", \"name\", \"\", \"id\", \"password\", \"placeholder\", \"your\", \"password\", \"\", 1, \"form-control\"], [1, \"my-3\"], [1, \"btn\", \"btn-success\"], [4, \"ngIf\"]],\n  template: function SigninComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h1\", 2);\n      i0.ɵɵtext(3, \"Sign In\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"form\", 3);\n      i0.ɵɵlistener(\"ngSubmit\", function SigninComponent_Template_form_ngSubmit_4_listener() {\n        return ctx.submit();\n      });\n      i0.ɵɵelementStart(5, \"div\", 4)(6, \"label\", 5);\n      i0.ɵɵtext(7, \"Email\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(8, \"input\", 6);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(9, \"div\", 7)(10, \"label\", 8);\n      i0.ɵɵtext(11, \"Password\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(12, \"input\", 9);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(13, \"div\", 10)(14, \"button\", 11);\n      i0.ɵɵtext(15, \"Sign In\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtemplate(16, SigninComponent_p_16_Template, 2, 1, \"p\", 12);\n      i0.ɵɵelementEnd()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"formGroup\", ctx.loginForm);\n      i0.ɵɵadvance(12);\n      i0.ɵɵproperty(\"ngIf\", ctx.authError);\n    }\n  },\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzaWduaW4uY29tcG9uZW50LmNzcyJ9 */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvdXNlcnMvc3JjL2xpYi9jb21wb25lbnRzL3NpZ25pbi9zaWduaW4uY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQ0EsZ0tBQWdLIiwic291cmNlUm9vdCI6IiJ9 */\"]\n});","map":{"version":3,"names":["StorageService","FormGroup","UntypedFormControl","Validators","AuthService","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate","ctx_r0","messageError","SigninComponent","constructor","authError","loginForm","email","required","password","singIN","login","subscribe","next","res","console","log","reset","setToken","token","error","err","status","message","submit","invalid","form","value","controls","ɵɵdirectiveInject","i1","i2","selectors","decls","vars","consts","template","SigninComponent_Template","rf","ctx","ɵɵlistener","SigninComponent_Template_form_ngSubmit_4_listener","ɵɵelement","ɵɵtemplate","SigninComponent_p_16_Template","ɵɵproperty"],"sources":["C:\\laragon\\www\\Angular-15-with-monorepo--master\\libs\\users\\src\\lib\\components\\signin\\signin.component.ts","C:\\laragon\\www\\Angular-15-with-monorepo--master\\libs\\users\\src\\lib\\components\\signin\\signin.component.html"],"sourcesContent":["import { StorageService } from './../../services/storage.service';\nimport { FormGroup, UntypedFormControl, Validators } from '@angular/forms';\nimport { AuthService } from './../../services/auth.service';\nimport { Component } from '@angular/core';\nimport { HttpErrorResponse } from '@angular/common/http';\nimport { AuthResponse } from '../../models/authResponse';\n\n@Component({\n  selector: 'users-signin',\n  templateUrl: './signin.component.html',\n  styleUrls: ['./signin.component.css']\n})\nexport class SigninComponent {\n\n  constructor (private AuthService:AuthService, private StorageService:StorageService){}\n\n  authError = false\n  messageError= \"Error is from the server , please try again\"\n  loginForm = new FormGroup({\n    email: new UntypedFormControl('',Validators.required),\n    password: new UntypedFormControl('',Validators.required)\n  })\n\n\n  singIN(email: string, password: string){\n    this.AuthService.login(email,password).subscribe({\n      next :  (res:AuthResponse)=>{console.log(res),\n      this.authError= false,\n      this.loginForm.reset()\n\n      this.StorageService.setToken(res.token)\n\n      },\n\n      error : (err : HttpErrorResponse)=> {\n        this.authError= true\n        if (err.status == 400) {\n\n          this.messageError = err.error.message\n        }\n      },\n\n      }\n\n    )\n  }\n\n  submit(){\n    // console.log(this.loginForm);\n\n    if(this.loginForm.invalid){\n      return ;\n    }\n\n    this.singIN(this.form.email.value, this.form.password.value)\n\n  }\n\n  get form(){\n    return this.loginForm.controls\n  }\n\n\n}\n","<div class=\"row my-5\">\n  <div class=\"col-md-4 my-3 mx-auto\">\n    <h1 class=\"text-center my-3\">Sign In</h1>\n    <form [formGroup]=\"loginForm\" (ngSubmit)=\"submit()\">\n      <div class=\"form-group my-3\">\n        <label for=\"email\">Email</label>\n        <input formControlName=\"email\" type=\"text\" class=\"form-control\" placeholder=\"your E-mail\" id=\"email\">\n      </div>\n      <div class=\"form-group\">\n        <label for=\"password\">Password</label>\n        <input formControlName=\"password\" type=\"password\" name=\"\" id=\"password\" placeholder=\"your\" password=\"\" class=\"form-control\"></div>\n      <div class=\"my-3\">\n        <button class=\"btn btn-success\">Sign In</button>\n      </div>\n\n      <p *ngIf=\"authError\" >{{ messageError }}</p>\n    </form>\n  </div>\n</div>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}